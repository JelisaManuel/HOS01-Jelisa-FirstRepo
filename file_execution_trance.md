# Contact Book — Execution Trace

## Overview
This document describes the execution flow, module structure, and data flow for the contact book application located in the `hos05` package.

## Module Structure
- `hos05/main.py`:
  - `main()` — program entry point for the example run. Imports functions from `contact_book` and `display` and exercises them.
- `hos05/contact_book.py`:
  - `add_contact(contacts, name, phone)` — adds or updates an entry in the `contacts` dict and returns it.
  - `remove_contact(contacts, name)` — deletes an entry if present, prints removal status, and returns the dict.
  - `search_contact(contacts, name)` — returns the phone number or a not-found string.
  - `list_contacts(contacts)` — returns the `contacts` dict.
- `hos05/display.py`:
  - `display_messsage(message)` — prints a message (note: function name contains a typo: `messsage`).
  - `display_contacts(contacts)` — prints each contact or a 'no contacts' message.

## Execution Flow (step-by-step)
1. Python runs `hos05/main.py` and checks `if __name__ == "__main__"`.
2. `main()` is invoked.
3. `contacts = {}` initializes an empty dictionary (in `main` scope).
4. `contacts = add_contact(contacts, "John Doe", "123-456-7890")`:
   - `add_contact` stores `{"John Doe": "123-456-7890"}` in the passed dict and returns it.
   - `main` rebinds `contacts` to the returned dict.
5. `contacts = add_contact(contacts, "Jane Doe", "987-654-3210")`:
   - `add_contact` adds `{"Jane Doe": "987-654-3210"}`.
6. `display_contacts(contacts)` prints all entries to stdout via a loop in `display.py`.
7. `message = search_contact(contacts, "John Doe")`:
   - `search_contact` returns the phone string for `John Doe`.
8. `display_messsage(message)` prints the search result. (Note: call matches typo in function name in `display.py`.)
9. `contacts = remove_contact(contacts, "John Doe")`:
   - `remove_contact` deletes the key, prints a removal status message, and returns the modified dict.
10. `display_contacts(contacts)` prints the updated list.
11. `main()` returns `None` and the program exits.

## Data Flow Diagram (Mermaid)
```mermaid
graph LR
  A[main: contacts = {}] --> B[add_contact: add John Doe]
  B --> C[contacts dict updated]
  C --> D[add_contact: add Jane Doe]
  D --> E[display_contacts -> prints all contacts]
  C --> F[search_contact("John Doe") -> phone or not-found]
  F --> G[display_messsage -> prints search result]
  C --> H[remove_contact("John Doe") -> mutates dict]
  H --> I[display_contacts -> prints updated contacts]
  style A fill:#f9f,stroke:#333,stroke-width:1px
  style C fill:#fffbcc
```

## Notes & Observations
- `display_messsage` contains an extra `s` in its name; both call and definition use the same misspelling, so it works but is a candidate for renaming to `display_message` for clarity.
- `from email.mime import message` in `main.py` appears unused and can be removed.
- The `contacts` dictionary is passed and returned explicitly; functions mutate it in-place but `main` keeps the returned reference, so behavior is predictable.

## Quick summary
- Entry point: `hos05/main.py` -> `main()`.
- Primary data object: `contacts` (Python dict mapping name -> phone).
- Side effects: printing to stdout in `display.py` and `remove_contact`.

File generated by Copilot analysis.
